<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="../reset.css" />
    <title>Document</title>
  </head>
  <body>
    <div class="cover">
      <p class="first-parallel"></p>
    </div>

    <div class="cover">
      <p class="second-parallel"></p>
    </div>

    <div class="cover">
      <p class="third-parallel"></p>
    </div>

    <div class="cover">
      <p class="forth-parallel"></p>
    </div>

    <script>
      const p1 = document.querySelector(".first-parallel");
      const p2 = document.querySelector(".second-parallel");
      const p3 = document.querySelector(".third-parallel");
      const p4 = document.querySelector(".forth-parallel");

      let count1 = 0;
      let count2 = 0;
      let count3 = 0;
      let count4 = 0;

      const textArr1 =
        "Yummy Tasty Delicious Useful Coding Yummy Yummmmy Yummmmmmmmmy yum".split(
          " "
        );
      const textArr2 =
        "Chicken Hamburger Pizza Salad Sushi Bibimbab Gimbab JJajangmyeon".split(
          " "
        );
      const textArr3 =
        "Let's Dive Into This Tutorial Take It Easy! Don't Worry".split(" ");
      const textArr4 =
        "Pure Moral Conscientious Meritorious Worthy Exemplary Upright ".split(
          " "
        );

      initText(p1, textArr1);
      initText(p2, textArr2);
      initText(p3, textArr3);
      initText(p4, textArr4);
      function initText(elem, text) {
        const t = [...text, ...text];
        t.forEach((item, index) => {
          elem.innerText += `${t[index]}\u00A0\u00A0\u00A0\u00A0`;
        });
      }

      function marqueeText(count, elem, direction) {
        if (count > elem.scrollWidth / 2) {
          elem.style.transform = `translate3d(0, 0, 0)`;
          count = 0;
        }
        elem.style.transform = `translate3d(${direction * count}px, 0, 0)`;

        return count;
      }

      function animate() {
        count1 += 1;
        count2 += 1;
        count3 += 1;
        count4 += 1;

        count1 = marqueeText(count1, p1, -1);
        count2 = marqueeText(count2, p2, 1);
        count3 = marqueeText(count3, p3, 1);
        count4 = marqueeText(count4, p4, 1);

        window.requestAnimationFrame(animate);
      }

      const scrollHandler = () => {
        count1 += 30;
        count2 += 30;
        count3 += 30;
        count4 += 30;
      };

      window.addEventListener("scroll", scrollHandler);
      animate();
    </script>
  </body>
</html>
